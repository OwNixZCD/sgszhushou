<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>神姜维</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: pan-y;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 10px;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-height: 100vh;
        }
        
        .left-panel {
            width: 100%;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }
        
        .tianren {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            color: #ffcc00;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.7);
        }
        
        .counter {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .counter-value {
            font-size: 36px;
            font-weight: bold;
            margin: 10px 0;
            color: #4cd964;
        }
        
        .counter-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .counter-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: #4a5568;
            color: white;
            font-size: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .counter-btn:active {
            transform: scale(0.95);
            background: #2d3748;
        }
        
        .clear-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .clear-btn:active {
            transform: scale(0.95);
            background: #c0392b;
        }
        
        .right-panel {
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            min-height: 500px;
        }
        
        .mode-selection {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .mode-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mode-btn:active {
            transform: scale(0.95);
            background: #2980b9;
        }
        
        .card-categories {
            display: flex;
            flex-direction: column;
            flex: 1;
            gap: 10px;
            overflow-y: auto;
            margin-bottom: 10px;
        }
        
        .category {
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            overflow: hidden;
        }
        
        .category-title {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffcc00;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 5px;
            justify-content: center;
        }
        
        .card-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 10px 8px;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            flex: 1;
            min-width: 70px;
            max-width: 120px;
        }
        
        .card-item.selected {
            background: #3498db;
            box-shadow: 0 0 8px rgba(52, 152, 219, 0.7);
        }
        
        .card-item:active {
            transform: scale(0.98);
        }
        
        .add-card {
            background: rgba(46, 204, 113, 0.3);
            color: #2ecc71;
            font-weight: bold;
        }
        
        .card-controls {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-top: 10px;
        }
        
        .control-btn {
            flex: 1;
            background: #9b59b6;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .control-btn:active {
            transform: scale(0.95);
            background: #8e44ad;
        }
        
        .control-btn.clear-selected {
            background: #e74c3c;
        }
        
        .control-btn.clear-selected:active {
            background: #c0392b;
        }
        
        .selected-count {
            text-align: center;
            font-size: 18px;
            padding: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            margin-top: 10px;
        }
        
        .nine-warning {
            color: #ff6b6b;
            font-weight: bold;
            animation: pulse 1.5s infinite;
            margin-top: 5px;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        /* 横屏优化 */
        @media (orientation: landscape) {
            .container {
                flex-direction: row;
                height: 100vh;
            }
            
            .left-panel {
                width: 20%;
                flex-direction: column;
                justify-content: flex-start;
                height: 100%;
            }
            
            .tianren {
                margin-top: 20px;
                margin-bottom: 30px;
            }
            
            .counter {
                margin: 20px 0;
            }
            
            .right-panel {
                width: 80%;
                height: 100%;
            }
            
            .card-categories {
                flex-direction: row;
                margin-bottom: 70px;
            }
            
            .category {
                flex: 1;
            }
            
            .card-list {
                flex-direction: column;
                flex-wrap: nowrap;
                overflow-y: auto;
                max-height: 300px;
            }
            
            .card-controls {
                position: absolute;
                bottom: 70px;
                left: 15px;
                right: 15px;
            }
            
            .selected-count {
                position: absolute;
                bottom: 10px;
                left: 15px;
                right: 15px;
            }
        }
        
        /* 大屏幕优化 */
        @media (min-width: 768px) {
            .container {
                height: 100vh;
            }
            
            .left-panel {
                width: 20%;
                flex-direction: column;
                justify-content: flex-start;
            }
            
            .tianren {
                margin-top: 20px;
                margin-bottom: 30px;
            }
            
            .counter {
                margin: 20px 0;
            }
            
            .right-panel {
                width: 80%;
            }
            
            .card-categories {
                flex-direction: row;
                margin-bottom: 70px;
            }
            
            .category {
                flex: 1;
            }
            
            .card-list {
                flex-direction: column;
                flex-wrap: nowrap;
                overflow-y: auto;
                max-height: 300px;
            }
            
            .card-controls {
                position: absolute;
                bottom: 70px;
                left: 15px;
                right: 15px;
            }
            
            .selected-count {
                position: absolute;
                bottom: 10px;
                left: 15px;
                right: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="left-panel">
            <div class="tianren">天任</div>
            <div class="counter">
                <div>计数器</div>
                <div class="counter-value" id="counter">0</div>
                <div class="counter-controls">
                    <button class="counter-btn" id="decrease">-</button>
                    <button class="counter-btn" id="increase">+</button>
                </div>
                <button class="clear-btn" id="clear">清空</button>
            </div>
        </div>
        
        <div class="right-panel" id="rightPanel">
            <div class="mode-selection" id="modeSelection">
                <button class="mode-btn" id="normalMode">普通</button>
                <button class="mode-btn" id="adaptiveMode">应变</button>
            </div>
            
            <div class="card-categories" id="cardCategories" style="display: none;">
                <div class="category">
                    <div class="category-title">基本</div>
                    <div class="card-list" id="basicCards">
                        <!-- 基本牌将通过JS动态生成 -->
                    </div>
                </div>
                
                <div class="category">
                    <div class="category-title">锦囊</div>
                    <div class="card-list" id="trickCards">
                        <!-- 锦囊牌将通过JS动态生成 -->
                    </div>
                </div>
                
                <div class="category">
                    <div class="category-title">装备</div>
                    <div class="card-list" id="equipmentCards">
                        <!-- 装备牌将通过JS动态生成 -->
                    </div>
                </div>
                
                <div class="card-controls">
                    <button class="control-btn clear-selected" id="clearSelected">清空选择</button>
                    <button class="control-btn" id="backToMode">返回</button>
                </div>
                
                <div class="selected-count" id="selectedCount">
                    已选择: <span id="count">0</span> 张牌
                    <div id="nineWarning" class="nine-warning" style="display: none;">可以发动九伐！</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 卡牌数据
        const cardData = {
            normal: {
                basic: ['杀', '闪', '桃', '酒', '+'],
                trick: ['决斗', '火攻', '桃园结义', '万箭齐发', '南蛮入侵', '五谷丰登', '借刀杀人', '顺手牵羊', '过河拆桥', '无懈可击', '铁索连环', '无中生有', '闪电', '乐不思蜀', '兵粮寸断', '+'],
                equipment: ['诸葛连弩', '雌雄双股剑', '青钢剑', '古锭刀', '寒冰剑', '贯石斧', '青龙偃月刀', '丈八蛇矛', '方天画戟', '朱雀羽扇', '麒麟弓', '八卦阵', '仁王盾', '藤甲', '白银狮子', '紫骍', '大宛', '赤兔', '爪黄飞电', '的卢', '骅骝', '绝影', '木牛流马', '+']
            },
            adaptive: {
                basic: ['杀', '闪', '桃', '酒', '+'],
                trick: ['决斗', '出其不意', '桃园结义', '万箭齐发', '南蛮入侵', '五谷丰登', '水淹七军', '逐近弃远', '顺手牵羊', '过河拆桥', '无懈可击', '铁索连环', '洞烛先机', '随机应变', '闪电', '乐不思蜀', '兵粮寸断', '+'],
                equipment: ['诸葛连弩', '雌雄双股剑', '青钢剑', '古锭刀', '贯石斧', '青龙偃月刀', '丈八蛇矛', '乌铁锁链', '五行鹤翎扇', '麒麟弓', '八卦阵', '仁王盾', '藤甲', '护心镜', '黑光铠', '紫骍', '大宛', '赤兔', '爪黄飞电', '的卢', '骅骝', '绝影', '铜雀', '天机图', '太公阴符', '木牛流马', '+']
            }
        };

        // 全局变量
        let currentMode = null;
        let selectedCards = [];
        let counterValue = 0;

        // DOM元素
        const counterDisplay = document.getElementById('counter');
        const increaseBtn = document.getElementById('increase');
        const decreaseBtn = document.getElementById('decrease');
        const clearBtn = document.getElementById('clear');
        const normalModeBtn = document.getElementById('normalMode');
        const adaptiveModeBtn = document.getElementById('adaptiveMode');
        const cardCategories = document.getElementById('cardCategories');
        const modeSelection = document.getElementById('modeSelection');
        const basicCardsContainer = document.getElementById('basicCards');
        const trickCardsContainer = document.getElementById('trickCards');
        const equipmentCardsContainer = document.getElementById('equipmentCards');
        const selectedCountDisplay = document.getElementById('count');
        const nineWarning = document.getElementById('nineWarning');
        const clearSelectedBtn = document.getElementById('clearSelected');
        const backToModeBtn = document.getElementById('backToMode');

        // 初始化计数器
        function initCounter() {
            increaseBtn.addEventListener('click', () => {
                counterValue++;
                updateCounter();
            });
            
            decreaseBtn.addEventListener('click', () => {
                if (counterValue > 0) {
                    counterValue--;
                    updateCounter();
                }
            });
            
            clearBtn.addEventListener('click', () => {
                counterValue = 0;
                updateCounter();
            });
            
            updateCounter();
        }

        function updateCounter() {
            counterDisplay.textContent = counterValue;
        }

        // 初始化模式选择
        function initModeSelection() {
            normalModeBtn.addEventListener('click', () => {
                selectMode('normal');
            });
            
            adaptiveModeBtn.addEventListener('click', () => {
                selectMode('adaptive');
            });
        }

        // 选择模式
        function selectMode(mode) {
            currentMode = mode;
            
            // 隐藏模式选择，显示卡牌区域
            modeSelection.style.display = 'none';
            cardCategories.style.display = 'flex';
            
            // 生成卡牌
            generateCards();
        }

        // 返回模式选择
        function backToModeSelection() {
            currentMode = null;
            
            // 显示模式选择，隐藏卡牌区域
            modeSelection.style.display = 'flex';
            cardCategories.style.display = 'none';
            
            // 重置选择状态
            selectedCards = [];
            updateSelectedCount();
        }

        // 清空所有选择
        function clearAllSelections() {
            // 移除所有选中状态
            const selectedElements = document.querySelectorAll('.card-item.selected');
            selectedElements.forEach(element => {
                element.classList.remove('selected');
            });
            
            // 重置选择数组
            selectedCards = [];
            updateSelectedCount();
        }

        // 生成卡牌
        function generateCards() {
            // 清空现有卡牌
            basicCardsContainer.innerHTML = '';
            trickCardsContainer.innerHTML = '';
            equipmentCardsContainer.innerHTML = '';
            
            // 生成基本牌
            cardData[currentMode].basic.forEach(card => {
                const cardElement = createCardElement(card, 'basic');
                basicCardsContainer.appendChild(cardElement);
            });
            
            // 生成锦囊牌
            cardData[currentMode].trick.forEach(card => {
                const cardElement = createCardElement(card, 'trick');
                trickCardsContainer.appendChild(cardElement);
            });
            
            // 生成装备牌
            cardData[currentMode].equipment.forEach(card => {
                const cardElement = createCardElement(card, 'equipment');
                equipmentCardsContainer.appendChild(cardElement);
            });
            
            // 重置选择状态
            selectedCards = [];
            updateSelectedCount();
        }

        // 创建卡牌元素
        function createCardElement(cardName, category) {
            const cardElement = document.createElement('div');
            cardElement.className = 'card-item';
            if (cardName === '+') {
                cardElement.classList.add('add-card');
            }
            cardElement.textContent = cardName;
            
            cardElement.addEventListener('click', () => {
                if (cardName === '+') {
                    // 处理添加新卡牌逻辑
                    const newCardName = prompt('请输入新卡牌名称:');
                    if (newCardName && newCardName.trim() !== '') {
                        // 在实际应用中，这里应该将新卡牌保存到数据中
                        const newCardElement = createCardElement(newCardName, category);
                        cardElement.parentNode.insertBefore(newCardElement, cardElement);
                    }
                } else {
                    // 切换选择状态
                    const cardId = `${category}-${cardName}`;
                    const index = selectedCards.indexOf(cardId);
                    
                    if (index === -1) {
                        // 选中
                        selectedCards.push(cardId);
                        cardElement.classList.add('selected');
                    } else {
                        // 取消选中
                        selectedCards.splice(index, 1);
                        cardElement.classList.remove('selected');
                    }
                    
                    updateSelectedCount();
                }
            });
            
            return cardElement;
        }

        // 更新已选择卡牌计数
        function updateSelectedCount() {
            selectedCountDisplay.textContent = selectedCards.length;
            
            if (selectedCards.length >= 9) {
                nineWarning.style.display = 'block';
            } else {
                nineWarning.style.display = 'none';
            }
        }

        // 初始化控制按钮
        function initControlButtons() {
            clearSelectedBtn.addEventListener('click', clearAllSelections);
            backToModeBtn.addEventListener('click', backToModeSelection);
        }

        // 初始化
        function init() {
            initCounter();
            initModeSelection();
            initControlButtons();
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>